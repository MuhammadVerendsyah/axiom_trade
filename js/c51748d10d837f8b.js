
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="7e4acdf4-3de0-51ea-8aeb-1701f0cee938")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,284508,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"errorOnce",{enumerable:!0,get:function(){return o}});let o=e=>{}},522016,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var o={default:function(){return y},useLinkStatus:function(){return _}};for(var a in o)Object.defineProperty(r,a,{enumerable:!0,get:o[a]});let n=e.r(190809),l=e.r(843476),i=n._(e.r(271645)),u=e.r(195057),s=e.r(8372),c=e.r(818581),d=e.r(718967),f=e.r(405550);e.r(233525);let p=e.r(91949),m=e.r(573668),g=e.r(565165);function h(e){return"string"==typeof e?e:(0,u.formatUrl)(e)}function y(t){var r;let o,a,n,[u,y]=(0,i.useOptimistic)(p.IDLE_LINK_STATUS),_=(0,i.useRef)(null),{href:v,as:b,children:x,prefetch:S=null,passHref:A,replace:P,shallow:E,scroll:F,onClick:C,onMouseEnter:j,onTouchStart:T,legacyBehavior:k=!1,onNavigate:O,ref:R,unstable_dynamicOnHover:K,...M}=t;o=x,k&&("string"==typeof o||"number"==typeof o)&&(o=(0,l.jsx)("a",{children:o}));let I=i.default.useContext(s.AppRouterContext),D=!1!==S,B=!1!==S?null===(r=S)||"auto"===r?g.FetchStrategy.PPR:g.FetchStrategy.Full:g.FetchStrategy.PPR,{href:N,as:$}=i.default.useMemo(()=>{let e=h(v);return{href:e,as:b?h(b):e}},[v,b]);if(k){if(o?.$$typeof===Symbol.for("react.lazy"))throw Object.defineProperty(Error("`<Link legacyBehavior>` received a direct child that is either a Server Component, or JSX that was loaded with React.lazy(). This is not supported. Either remove legacyBehavior, or make the direct child a Client Component that renders the Link's `<a>` tag."),"__NEXT_ERROR_CODE",{value:"E863",enumerable:!1,configurable:!0});a=i.default.Children.only(o)}let L=k?a&&"object"==typeof a&&a.ref:R,U=i.default.useCallback(e=>(null!==I&&(_.current=(0,p.mountLinkInstance)(e,N,I,B,D,y)),()=>{_.current&&((0,p.unmountLinkForCurrentNavigation)(_.current),_.current=null),(0,p.unmountPrefetchableInstance)(e)}),[D,N,I,B,y]),W={ref:(0,c.useMergedRef)(U,L),onClick(t){k||"function"!=typeof C||C(t),k&&a.props&&"function"==typeof a.props.onClick&&a.props.onClick(t),!I||t.defaultPrevented||function(t,r,o,a,n,l,u){if("undefined"!=typeof window){let s,{nodeName:c}=t.currentTarget;if("A"===c.toUpperCase()&&((s=t.currentTarget.getAttribute("target"))&&"_self"!==s||t.metaKey||t.ctrlKey||t.shiftKey||t.altKey||t.nativeEvent&&2===t.nativeEvent.which)||t.currentTarget.hasAttribute("download"))return;if(!(0,m.isLocalURL)(r)){n&&(t.preventDefault(),location.replace(r));return}if(t.preventDefault(),u){let e=!1;if(u({preventDefault:()=>{e=!0}}),e)return}let{dispatchNavigateAction:d}=e.r(699781);i.default.startTransition(()=>{d(o||r,n?"replace":"push",l??!0,a.current)})}}(t,N,$,_,P,F,O)},onMouseEnter(e){k||"function"!=typeof j||j(e),k&&a.props&&"function"==typeof a.props.onMouseEnter&&a.props.onMouseEnter(e),I&&D&&(0,p.onNavigationIntent)(e.currentTarget,!0===K)},onTouchStart:function(e){k||"function"!=typeof T||T(e),k&&a.props&&"function"==typeof a.props.onTouchStart&&a.props.onTouchStart(e),I&&D&&(0,p.onNavigationIntent)(e.currentTarget,!0===K)}};return(0,d.isAbsoluteUrl)($)?W.href=$:k&&!A&&("a"!==a.type||"href"in a.props)||(W.href=(0,f.addBasePath)($)),n=k?i.default.cloneElement(a,W):(0,l.jsx)("a",{...M,...W,children:o}),(0,l.jsx)(w.Provider,{value:u,children:n})}e.r(284508);let w=(0,i.createContext)(p.IDLE_LINK_STATUS),_=()=>(0,i.useContext)(w);("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},667585,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"BailoutToCSR",{enumerable:!0,get:function(){return a}});let o=e.r(132061);function a({reason:e,children:t}){if("undefined"==typeof window)throw Object.defineProperty(new o.BailoutToCSRError(e),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});return t}},652157,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"PreloadChunks",{enumerable:!0,get:function(){return i}});let o=e.r(843476),a=e.r(174080),n=e.r(563599),l=e.r(309885);function i({moduleIds:e}){if("undefined"!=typeof window)return null;let t=n.workAsyncStorage.getStore();if(void 0===t)return null;let r=[];if(t.reactLoadableManifest&&e){let o=t.reactLoadableManifest;for(let t of e){if(!o[t])continue;let e=o[t].files;r.push(...e)}}return 0===r.length?null:(0,o.jsx)(o.Fragment,{children:r.map(e=>{let r=`${t.assetPrefix}/_next/${(0,l.encodeURIPath)(e)}?dpl=dpl_Gs2tBhNjvtJ8drB8hRm2VExX6zA5`;return e.endsWith(".css")?(0,o.jsx)("link",{precedence:"dynamic",href:r,rel:"stylesheet",as:"style",nonce:t.nonce},e):((0,a.preload)(r,{as:"script",fetchPriority:"low",nonce:t.nonce}),null)})})}},869093,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"default",{enumerable:!0,get:function(){return s}});let o=e.r(843476),a=e.r(271645),n=e.r(667585),l=e.r(652157);function i(e){return{default:e&&"default"in e?e.default:e}}let u={loader:()=>Promise.resolve(i(()=>null)),loading:null,ssr:!0},s=function(e){let t={...u,...e},r=(0,a.lazy)(()=>t.loader().then(i)),s=t.loading;function c(e){let i=s?(0,o.jsx)(s,{isLoading:!0,pastDelay:!0,error:null}):null,u=!t.ssr||!!t.loading,c=u?a.Suspense:a.Fragment,d=t.ssr?(0,o.jsxs)(o.Fragment,{children:["undefined"==typeof window?(0,o.jsx)(l.PreloadChunks,{moduleIds:t.modules}):null,(0,o.jsx)(r,{...e})]}):(0,o.jsx)(n.BailoutToCSR,{reason:"next/dynamic",children:(0,o.jsx)(r,{...e})});return(0,o.jsx)(c,{...u?{fallback:i}:{},children:d})}return c.displayName="LoadableComponent",c}},770703,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"default",{enumerable:!0,get:function(){return a}});let o=e.r(555682)._(e.r(869093));function a(e,t){let r={};"function"==typeof e&&(r.loader=e);let a={...r,...t};return(0,o.default)({...a,modules:a.loadableGenerated?.modules})}("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},778536,e=>{"use strict";var t=e.i(639372),r=e.i(265172),o=e.i(758219),a=e.i(741124);let n=(0,t.atom)(""),l=(0,r.atomWithStorage)("portfolioSelectedList-sol",[],(0,o.safeSSRNoSyncStorage)(),{getOnInit:!0}),i=(0,r.atomWithStorage)("portfolioSelectedList-bnb",[],(0,o.safeSSRNoSyncStorage)(),{getOnInit:!0}),u=(0,t.atom)(e=>{let t=e(a.currentChainAtom);return e("sol"===t?l:i)},(e,t,r)=>{let o=e(a.currentChainAtom),n=e("sol"===o?l:i);t("sol"===o?l:i,"function"==typeof r?r(n):r)});(0,t.atom)("active");let s=(0,t.atom)(!0),c=(0,t.atom)([]),d=(0,t.atom)([]),f=(0,t.atom)(null),p=(0,t.atom)(null),m=(0,t.atom)([]),g=(0,t.atom)([]),h=(0,t.atom)([]),y=(0,t.atom)(null),w=(0,r.atomWithStorage)("portfolioTab","spot",(0,o.safeSSRNoSyncStorage)(),{getOnInit:!0});(0,r.atomWithStorage)("portfolioView","graph",(0,o.safeSSRNoSyncStorage)(),{getOnInit:!0});let _=(0,t.atom)(new Date),v=(0,t.atom)("wallet"),b=(0,t.atom)(null),x=(0,t.atom)(!1),S=(0,t.atom)([]),A=(0,t.atom)([]),P=(0,r.atomWithStorage)("showHidden",!1),E=(0,r.atomWithStorage)("hideTransfers",!1,(0,o.safeSSRNoSyncStorage)()),F=(0,r.atomWithStorage)("isSolCalendar",!1,(0,o.safeSSRNoSyncStorage)(),{getOnInit:!0}),C=(0,t.atom)("sol"),j=(0,r.atomWithStorage)("showTransferLabel",!1,(0,o.safeSSRNoSyncStorage)(),{getOnInit:!0});e.s(["balanceStatsAtom",0,f,"calendarDataAtom",0,g,"chartDataAtom",0,m,"currentDateAtom",0,_,"hiddenPositionsAtom",0,A,"hideTransfersAtom",0,E,"isLoadingAtom",0,s,"isPortfolioDataLoadingAtom",0,x,"isSolCalendarAtom",0,F,"performanceMetricsAtom",0,p,"perpsChartDataAtom",0,h,"portfolioChainAtom",0,C,"portfolioDataAtom",0,y,"portfolioLastActionAtom",0,v,"portfolioSelectedListAtom",0,u,"portfolioTabAtom",0,w,"positionsAtom",0,c,"searchAddressAtom",0,n,"showHiddenAtom",0,P,"showTransferLabelAtom",0,j,"topPositionsAtom",0,S,"totalPortfolioDataAtom",0,b,"transactionsAtom",0,d])},651422,e=>{"use strict";var t=e.i(843476),r=e.i(271645),o=e.i(657688);let a=/^https?:\/\/.+/,n=(0,r.memo)(({tokenTicker:e,src:n,alt:l,width:i,height:u,className:s,loading:c="lazy"})=>{let[d,f]=(0,r.useState)(!1),p=(0,r.useMemo)(()=>!d&&n&&(a.test(n)||n.startsWith("/images/")||n.startsWith("data:image/webp;base64,"))?["file://","C:\\"].some(e=>n.startsWith(e))?"/pfps/Question_pfp.webp":n:e&&/^[a-zA-Z]$/.test(e[0])?`/pfps/${e[0].toUpperCase()}_pfp.webp`:"/pfps/Question_pfp.webp",[d,n,e]);return(0,t.jsx)(o.default,{src:p,alt:l??"",width:i,height:u,style:{objectFit:"cover"},onError:()=>f(!0),className:s,loading:c,unoptimized:!0,priority:!1})});e.s(["default",0,n])},834938,252436,e=>{"use strict";var t=e.i(467034);let r=new Uint8Array([217,3,161,123,53,200,206,36,143,2,220,252,240,109,204,23,217,174,79,158,18,76,149,117,73,40,207,77,34,194,196,163]),o=async e=>{let o=new TextEncoder().encode(e),a=await window.crypto.subtle.importKey("raw",o,"PBKDF2",!1,["deriveBits"]),n=await window.crypto.subtle.deriveBits({name:"PBKDF2",salt:r,iterations:6e5,hash:"SHA-256"},a,256);return t.Buffer.from(n).toString("base64")};e.s(["hashPassword",0,o],834938),e.i(284795);var a=e.i(356026),n=e.i(659341);let l=new n.default("ffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632550",16);async function i(e,r){for(;;){let o=r?Uint8Array.from(atob(r),e=>e.charCodeAt(0)):crypto.getRandomValues(new Uint8Array(32)),i=await window.crypto.subtle.importKey("raw",new TextEncoder().encode(e),"PBKDF2",!1,["deriveBits"]),u=await window.crypto.subtle.deriveBits({name:"PBKDF2",salt:o,iterations:6e5,hash:"SHA-256"},i,256),s=t.Buffer.from(u).toString("hex");if(new n.default(s,16).lt(l)){let e=t.Buffer.from((0,a.getPublicKey)(s)).toString("hex");return{privateKey:s,publicKey:e,clientSecret:t.Buffer.from(o).toString("base64")}}if(r)throw Error("Failed to generate API key")}}e.s(["generateApiKey",()=>i],252436)},32374,57895,e=>{"use strict";e.i(247167);var t,r,o=e.i(843476),a=e.i(271645);let n=(0,a.createContext)(null);function l({clientId:e,nonce:t,onScriptLoadSuccess:r,onScriptLoadError:o,children:l}){let i=function(e={}){let{nonce:t,onScriptLoadSuccess:r,onScriptLoadError:o}=e,[n,l]=(0,a.useState)(!1),i=(0,a.useRef)(r);i.current=r;let u=(0,a.useRef)(o);return u.current=o,(0,a.useEffect)(()=>{let e=document.createElement("script");return e.src="https://accounts.google.com/gsi/client",e.async=!0,e.defer=!0,e.nonce=t,e.onload=()=>{var e;l(!0),null==(e=i.current)||e.call(i)},e.onerror=()=>{var e;l(!1),null==(e=u.current)||e.call(u)},document.body.appendChild(e),()=>{document.body.removeChild(e)}},[t]),n}({nonce:t,onScriptLoadSuccess:r,onScriptLoadError:o}),u=(0,a.useMemo)(()=>({clientId:e,scriptLoadedSuccessfully:i}),[e,i]);return a.default.createElement(n.Provider,{value:u},l)}let i={large:40,medium:32,small:20};function u({onSuccess:e,onError:t,useOneTap:r,promptMomentNotification:o,type:l="standard",theme:u="outline",size:s="large",text:c,shape:d,logo_alignment:f,width:p,locale:m,click_listener:g,containerProps:h,...y}){let w=(0,a.useRef)(null),{clientId:_,scriptLoadedSuccessfully:v}=function(){let e=(0,a.useContext)(n);if(!e)throw Error("Google OAuth components must be used within GoogleOAuthProvider");return e}(),b=(0,a.useRef)(e);b.current=e;let x=(0,a.useRef)(t);x.current=t;let S=(0,a.useRef)(o);return S.current=o,(0,a.useEffect)(()=>{var e,t,o,a,n,i,h,A,P;if(v)return null==(o=null==(t=null==(e=null==window?void 0:window.google)?void 0:e.accounts)?void 0:t.id)||o.initialize({client_id:_,callback:e=>{var t,r;if(!(null==e?void 0:e.credential))return null==(t=x.current)?void 0:t.call(x);let{credential:o,select_by:a}=e;b.current({credential:o,clientId:null!=(r=null==e?void 0:e.clientId)?r:null==e?void 0:e.client_id,select_by:a})},...y}),null==(i=null==(n=null==(a=null==window?void 0:window.google)?void 0:a.accounts)?void 0:n.id)||i.renderButton(w.current,{type:l,theme:u,size:s,text:c,shape:d,logo_alignment:f,width:p,locale:m,click_listener:g}),r&&(null==(P=null==(A=null==(h=null==window?void 0:window.google)?void 0:h.accounts)?void 0:A.id)||P.prompt(S.current)),()=>{var e,t,o;r&&(null==(o=null==(t=null==(e=null==window?void 0:window.google)?void 0:e.accounts)?void 0:t.id)||o.cancel())}},[_,v,r,l,u,s,c,d,f,p,m]),a.default.createElement("div",{...h,ref:w,style:{height:i[s],...null==h?void 0:h.style}})}var s=e.i(862243),c=e.i(672464),d=e.i(542119),f=e.i(247317),p=e.i(268804),m=e.i(815062),g=e.i(458768);e.i(284795);var h=e.i(356026),y=e.i(657688),w=e.i(750214),_=e.i(363071),v=e.i(863568);e.s(["default",0,({onSuccess:e,loadingMessage:t="Authenticating...",successMessage:r="Authenticated",text:n="continue_with",allowRegistration:i=!0,isVerify:b=!1,forAddCredential:x=!1,allowLinking:S=!1})=>{let A="311699522805-ule1kgj57j4dq2qo8qr6ih7d0ejb6mv6.apps.googleusercontent.com",[P,E]=(0,a.useState)(null),[F,C]=(0,a.useState)(!1),j=(0,c.useSetAtom)(d.mobileAuthKeysAtom),T=(0,c.useAtomValue)(d.isAuthedAtom),k=(0,c.useAtomValue)(d.referrerAtom),O=(0,w.useAtomCallback)((0,a.useCallback)(e=>e(d.userIdAtom),[])),{isLocked:R,lock:K,unlock:M}=(0,_.default)(),I=(0,c.useSetAtom)(d.isJustSignedUpAtom),D=(0,c.useSetAtom)(d.isPhraseModalOpenAtom),B=(0,v.useTurnkeyClient)();(0,a.useEffect)(()=>{let e=(0,h.generateP256KeyPair)();E({publicKey:e.publicKeyUncompressed,privateKey:e.privateKey})},[]),(0,a.useEffect)(()=>{let e;C((e=window.navigator.userAgent.toLowerCase(),/android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini/i.test(e)))},[]);let N=P?(0,s.sha256)(P.publicKey).replace(/^0x/,""):null,$=(0,m.useOnAuth)(),L=async o=>{if(R())return g.default.error("Please wait for authentication to complete");K();try{if(T&&!b)return g.default.error("You are already signed in");if(S){if(!B)return g.default.error("Turnkey client not found");return await (0,v.isTurnkeySessionExpired)(B),g.default.error("Turnkey session expired, please log out and in again")}let a=g.default.loading(t,{duration:1/0});if(!P)return void g.default.error("Failed Google OAuth: No auth keys",{toastId:a});try{if(o.credential){let{credentialBundle:t,orgId:n,userId:l,isNewUser:u}=await p.axiomApiV2.post("/google-oauth",{credential:o.credential,sessionPublicKey:P.publicKey,referrer:k,allowRegistration:i,isVerify:b,forAddCredential:x,allowLinking:S});if(S){if(!B)throw Error("Turnkey client still not found");let{userId:t}=await B.getWhoami();await B.createOauthProviders({oauthProviders:[{providerName:"Google",oidcToken:o.credential}],userId:t}),g.default.success(r,{toastId:a}),e?.();return}if(b){if(l!==O())throw Error("User ID mismatch");e?.()}else await $({type:"bundle",turnkeyCredentialBundle:t,authPrivateKey:P.privateKey},n,l,"google",e),u&&(I(!0),D(!0));g.default.success(r,{toastId:a})}else g.default.error("Failed Google OAuth: No credential provided",{toastId:a})}catch(e){g.default.error("Failed Google OAuth: "+(0,f.getErrorMessage)(e),{toastId:a})}}finally{M()}};return N?(0,o.jsx)(l,{clientId:A,nonce:N,children:(0,o.jsxs)("div",{className:"w-full",children:[(0,o.jsxs)("button",{onClick:F?()=>{if(R())return g.default.error("Please wait for google to redirect");K();try{if(!N||!P)throw Error("Failed to initialize Google login");j({publicKey:P.publicKey,privateKey:P.privateKey,allowRegistration:i,referrer:k??void 0});let e=new URLSearchParams({client_id:A,redirect_uri:`${window.location.origin}/google-oauth`,response_type:"code",scope:"email profile",nonce:N,prompt:"consent"});window.location.href=`https://accounts.google.com/o/oauth2/v2/auth?${e.toString()}`}catch(e){g.default.error("Failed Google OAuth: "+(0,f.getErrorMessage)(e))}finally{M()}}:()=>{let e=document.querySelector('.google-login [role="button"]');e&&e.click()},className:"bg-secondaryStroke hover:bg-secondaryStroke/80 flex flex-row w-full h-[32px] px-[16px] gap-[8px] justify-center items-center rounded-full transition-all duration-125",children:[(0,o.jsx)(y.default,{src:"/images/google-logo.svg",alt:"Google logo",width:16,height:16}),(0,o.jsx)("span",{className:"text-[14px] font-medium text-textPrimary",children:"Continue with Google"})]}),(0,o.jsx)("div",{className:"hidden google-login",children:(0,o.jsx)(u,{nonce:N,theme:"filled_black",shape:"pill",size:"large",text:n,useOneTap:!1,auto_select:!1,onSuccess:L})})]})}):null}],32374);var b=e.i(467034);let x=async()=>{if("phantom"in window){let e=window,t=e.phantom?.solana;if(t?.isPhantom)try{return await t.connect(),t}catch(e){g.default.error("Failed to connect to Phantom: "+(0,f.getErrorMessage)(e))}else g.default.error("Phantom is not installed")}return null};var S=e.i(651422);e.i(490156);var A=e.i(103476);class P extends Error{constructor(e,t=null){super(`${e}${t?` - error: ${t.message}`:""}`),this.originalError=t,this.name="WalletStamperError"}}(t=r||(r={})).Ethereum="ethereum",t.Solana="solana";var E=e.i(110831);class F{constructor(e){this.wallet=e}async stamp(t){let o,a;try{o=await this.wallet.signMessage(t)}catch(e){throw new P("Failed to sign the message",e)}let n=this.wallet.type===r.Solana?"SIGNATURE_SCHEME_TK_API_ED25519":"SIGNATURE_SCHEME_TK_API_SECP256K1_EIP191";try{if(this.wallet.type===r.Ethereum){let{recoverPublicKey:r,hashMessage:n}=await e.A(933619),{compressRawPublicKey:l,toDerSignature:i}=await e.A(481096);a=(await r({hash:n(t),signature:o})).replace("0x","");let u=Uint8Array.from(b.Buffer.from(a,"hex"));a=b.Buffer.from(l(u)).toString("hex"),o=i(o.replace("0x",""))}else a=await this.wallet.getPublicKey()}catch(e){throw new P("Failed to recover public key",e)}let l={publicKey:a,scheme:n,signature:o};return{stampHeaderName:"X-Stamp",stampHeaderValue:(0,E.stringToBase64urlString)(JSON.stringify(l))}}}e.i(781974),e.i(658765),e.i(94007);var C=e.i(850430);e.i(258291);var j=e.i(29036);e.s(["default",0,({onSuccess:e,allowRegistration:t=!0,successMessage:n="Authenticated",isVerify:l=!1,forAddCredential:i=!1,allowLinking:u=!1})=>{let s=(0,c.useAtomValue)(d.referrerAtom),y=(0,m.useOnAuth)(),P=(0,c.useAtomValue)(d.isAuthedAtom),E=(0,c.useSetAtom)(d.isJustSignedUpAtom),T=(0,c.useSetAtom)(d.isPhraseModalOpenAtom),{isLocked:k,lock:O,unlock:R}=(0,_.default)(),K=(0,w.useAtomCallback)((0,a.useCallback)(e=>e(d.userIdAtom),[])),M=(0,v.useTurnkeyClient)(),I=async()=>{if(k())return g.default.error("Please wait for the verification to complete");O();try{if(P&&!l)return g.default.error("You are already signed in");if(u){if(!M)return g.default.error("Turnkey client not found");return await (0,v.isTurnkeySessionExpired)(M),g.default.error("Turnkey session expired, please log out and in again")}let o=g.default.loading("Continue in Phantom...",{duration:1/0}),a=await x();if(a)try{let c=a.publicKey;if(!c)throw Error("Failed to get Phantom public key");let d=c.toBase58();g.default.loading("Fetching nonce...",{toastId:o,duration:1/0});let f=await p.axiomApiV2.post("/wallet-nonce",{walletAddress:d});g.default.loading("Sign message in Phantom...",{toastId:o,duration:1/0});let m=`By signing, you agree to Axiom's Terms of Use & Privacy Policy (axiom.trade/legal).

Nonce: ${f}`,w=new TextEncoder().encode(m),_=await a.signMessage(w,"utf8"),v=A.default.encode(_.signature);g.default.loading("Verifying signature...",{toastId:o,duration:1/0});let{orgId:x,userId:S,turnkeyUserId:P,isNewUser:k}=await p.axiomApiV2.post("/verify-wallet-v2",{walletAddress:d,signature:v,nonce:f,referrer:s,allowRegistration:t,isVerify:l,forAddCredential:i,allowLinking:u});if(u){if(!M)throw Error("Turnkey client still not found");await M.createApiKeys({apiKeys:[{apiKeyName:"Solana Wallet",publicKey:b.Buffer.from(A.default.decode(d)).toString("hex"),curveType:"API_KEY_CURVE_ED25519"}],userId:P}),g.default.success(n,{toastId:o}),e?.();return}if(l){if(S!==K())throw Error("User ID mismatch");g.default.success(n,{toastId:o}),e?.();return}let O=new F({type:r.Solana,getPublicKey:async()=>b.Buffer.from(A.default.decode(c.toBase58())).toString("hex"),signMessage:async e=>{let t=new TextEncoder().encode(e),r=await a.signMessage(t,"utf8");return b.Buffer.from(r.signature).toString("hex")}}),R=new C.TurnkeyClient({baseUrl:"https://api.turnkey.com"},O),I=(0,h.generateP256KeyPair)();g.default.loading("Sign message in Phantom...",{toastId:o,duration:1/0});let D=(0,j.createActivityPoller)({client:R,requestFn:R.createReadWriteSession,refreshIntervalMs:2e3}),B=await D({type:"ACTIVITY_TYPE_CREATE_READ_WRITE_SESSION_V2",timestampMs:Date.now().toString(),organizationId:x,parameters:{apiKeyName:`Axiom Nonce: ${f}`,targetPublicKey:I.publicKeyUncompressed,userId:P,expirationSeconds:"2592000"}}),N=B.result.createReadWriteSessionResultV2?.credentialBundle;if(!N)throw Error("Failed to create read/write session");await y({type:"bundle",turnkeyCredentialBundle:N,authPrivateKey:I.privateKey},x,S,"phantom",e),k&&(E(!0),T(!0)),g.default.success(n,{toastId:o})}catch(e){g.default.error("Failed to connect: "+(0,f.getErrorMessage)(e),{toastId:o})}else{let e;e=window.navigator.userAgent.toLowerCase(),/android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini/i.test(e)&&g.default.warn("You must use the Phantom browser to sign in on mobile with Phantom"),g.default.error("Failed to connect to Phantom",{toastId:o})}}finally{R()}};return(0,o.jsxs)("button",{onClick:I,className:"bg-secondaryStroke flex flex-row w-full h-[32px] px-[12px] gap-[8px] justify-center items-center rounded-full hover:bg-secondaryStroke/80 transition-all duration-125 cursor-pointer",children:[(0,o.jsx)(S.default,{src:"/images/phantom-purple.svg",alt:"Phantom logo",width:16,height:16}),(0,o.jsx)("span",{className:"text-[14px] text-textPrimary",children:"Connect with Phantom"})]})}],57895)},832223,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){if(null==e)throw TypeError("Expected a string but received a ".concat(e));if("String"!==e.constructor.name)throw TypeError("Expected a string but received a ".concat(e.constructor.name))},t.exports=r.default,t.exports.default=r.default},951584,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e,t){for(var r=0;r<t.length;r++){var o=t[r];if(e===o||"[object RegExp]"===Object.prototype.toString.call(o)&&o.test(e))return!0}return!1},t.exports=r.default,t.exports.default=r.default},471789,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e,t){(0,a.default)(e),"object"===n(t)?(r=t.min||0,o=t.max):(r=arguments[1],o=arguments[2]);var r,o,l=encodeURI(e).split(/%..|./).length-1;return l>=r&&(void 0===o||l<=o)};var o,a=(o=e.r(832223))&&o.__esModule?o:{default:o};function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}t.exports=r.default,t.exports.default=r.default},871707,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;for(var r in t)void 0===e[r]&&(e[r]=t[r]);return e},t.exports=r.default,t.exports.default=r.default},367642,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e,t){(0,o.default)(e),(t=(0,a.default)(t,l)).allow_trailing_dot&&"."===e[e.length-1]&&(e=e.substring(0,e.length-1)),!0===t.allow_wildcard&&0===e.indexOf("*.")&&(e=e.substring(2));var r=e.split("."),n=r[r.length-1];return!(t.require_tld&&(r.length<2||!t.allow_numeric_tld&&!/^([a-z\u00A1-\u00A8\u00AA-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,}|xn[a-z0-9-]{2,})$/i.test(n)||/\s/.test(n)))&&!(!t.allow_numeric_tld&&/^\d+$/.test(n))&&r.every(function(e){return!(e.length>63&&!t.ignore_max_length||!/^[a-z_\u00a1-\uffff0-9-]+$/i.test(e)||/[\uff01-\uff5e]/.test(e)||/^-|-$/.test(e)||!t.allow_underscores&&/_/.test(e))})};var o=n(e.r(832223)),a=n(e.r(871707));function n(e){return e&&e.__esModule?e:{default:e}}var l={require_tld:!0,allow_underscores:!1,allow_trailing_dot:!1,allow_numeric_tld:!1,allow_wildcard:!1,ignore_max_length:!1};t.exports=r.default,t.exports.default=r.default},635997,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,a.default)(t);var o=("object"===n(r)?r.version:arguments[1])||"";return o?"4"===o.toString()?u.test(t):"6"===o.toString()&&c.test(t):e(t,{version:4})||e(t,{version:6})};var o,a=(o=e.r(832223))&&o.__esModule?o:{default:o};function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var l="(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])",i="(".concat(l,"[.]){3}").concat(l),u=new RegExp("^".concat(i,"$")),s="(?:[0-9a-fA-F]{1,4})",c=RegExp("^("+"(?:".concat(s,":){7}(?:").concat(s,"|:)|")+"(?:".concat(s,":){6}(?:").concat(i,"|:").concat(s,"|:)|")+"(?:".concat(s,":){5}(?::").concat(i,"|(:").concat(s,"){1,2}|:)|")+"(?:".concat(s,":){4}(?:(:").concat(s,"){0,1}:").concat(i,"|(:").concat(s,"){1,3}|:)|")+"(?:".concat(s,":){3}(?:(:").concat(s,"){0,2}:").concat(i,"|(:").concat(s,"){1,4}|:)|")+"(?:".concat(s,":){2}(?:(:").concat(s,"){0,3}:").concat(i,"|(:").concat(s,"){1,5}|:)|")+"(?:".concat(s,":){1}(?:(:").concat(s,"){0,4}:").concat(i,"|(:").concat(s,"){1,6}|:)|")+"(?::((?::".concat(s,"){0,5}:").concat(i,"|(?::").concat(s,"){1,7}|:))")+")(%[0-9a-zA-Z.]{1,})?$");t.exports=r.default,t.exports.default=r.default},217968,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e,t){if((0,o.default)(e),(t=(0,u.default)(t,c)).require_display_name||t.allow_display_name){var r=e.match(d);if(r){var s,y,w=r[1];if(e=e.replace(w,"").replace(/(^<|>$)/g,""),w.endsWith(" ")&&(w=w.slice(0,-1)),!(!(!(y=(s=w).replace(/^"(.+)"$/,"$1")).trim()||/[\.";<>]/.test(y)&&(y===s||y.split('"').length!==y.split('\\"').length))&&1))return!1}else if(t.require_display_name)return!1}if(!t.ignore_max_length&&e.length>254)return!1;var _=e.split("@"),v=_.pop(),b=v.toLowerCase();if(t.host_blacklist.length>0&&(0,a.default)(b,t.host_blacklist)||t.host_whitelist.length>0&&!(0,a.default)(b,t.host_whitelist))return!1;var x=_.join("@");if(t.domain_specific_validation&&("gmail.com"===b||"googlemail.com"===b)){var S=(x=x.toLowerCase()).split("+")[0];if(!(0,n.default)(S.replace(/\./g,""),{min:6,max:30}))return!1;for(var A=S.split("."),P=0;P<A.length;P++)if(!p.test(A[P]))return!1}if(!1===t.ignore_max_length&&(!(0,n.default)(x,{max:64})||!(0,n.default)(v,{max:254})))return!1;if(!(0,l.default)(v,{require_tld:t.require_tld,ignore_max_length:t.ignore_max_length,allow_underscores:t.allow_underscores})){if(!t.allow_ip_domain)return!1;if(!(0,i.default)(v)){if(!v.startsWith("[")||!v.endsWith("]"))return!1;var E=v.slice(1,-1);if(0===E.length||!(0,i.default)(E))return!1}}if(t.blacklisted_chars&&-1!==x.search(RegExp("[".concat(t.blacklisted_chars,"]+"),"g")))return!1;if('"'===x[0]&&'"'===x[x.length-1])return x=x.slice(1,x.length-1),t.allow_utf8_local_part?h.test(x):m.test(x);for(var F=t.allow_utf8_local_part?g:f,C=x.split("."),j=0;j<C.length;j++)if(!F.test(C[j]))return!1;return!0};var o=s(e.r(832223)),a=s(e.r(951584)),n=s(e.r(471789)),l=s(e.r(367642)),i=s(e.r(635997)),u=s(e.r(871707));function s(e){return e&&e.__esModule?e:{default:e}}var c={allow_display_name:!1,allow_underscores:!1,require_display_name:!1,allow_utf8_local_part:!0,require_tld:!0,blacklisted_chars:"",ignore_max_length:!1,host_blacklist:[],host_whitelist:[]},d=/^([^\x00-\x1F\x7F-\x9F\cX]+)</i,f=/^[a-z\d!#\$%&'\*\+\-\/=\?\^_`{\|}~]+$/i,p=/^[a-z\d]+$/,m=/^([\s\x01-\x08\x0b\x0c\x0e-\x1f\x7f\x21\x23-\x5b\x5d-\x7e]|(\\[\x01-\x09\x0b\x0c\x0d-\x7f]))*$/i,g=/^[a-z\d!#\$%&'\*\+\-\/=\?\^_`{\|}~\u00A1-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+$/i,h=/^([\s\x01-\x08\x0b\x0c\x0e-\x1f\x7f\x21\x23-\x5b\x5d-\x7e\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]|(\\[\x01-\x09\x0b\x0c\x0d-\x7f\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))*$/i;t.exports=r.default,t.exports.default=r.default}]);

//# sourceMappingURL=0d955876c6242425.js.map
//# debugId=7e4acdf4-3de0-51ea-8aeb-1701f0cee938
